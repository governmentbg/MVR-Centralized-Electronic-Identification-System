<div class="col" *transloco="let t">
    <p-table
        #usersTable
        dataKey="id"
        [value]="users || []"
        [tableStyle]="{ 'min-width': '100%' }"
        [rowHover]="true"
        [paginator]="true"
        [totalRecords]="users.length"
        [rows]="10"
        [rowsPerPageOptions]="[10, 25, 50]"
        [currentPageReportTemplate]="
            t('global.txtTablePagination', {
                first: '{first}',
                last: '{last}',
                totalRecords: '{totalRecords}'
            })
        "
        [showCurrentPageReport]="true"
        loadingIcon="pi pi-spin pi-spinner"
        sortField="!isAdministrator"
        [sortOrder]="1"
        [rowSelectable]="false"
        [globalFilterFields]="['name', 'email', 'phone']">
        <ng-template pTemplate="caption">
            <div class="table-header d-flex justify-content-end align-items-center">
                <span class="p-input-icon-left">
                    <i class="pi pi-search"></i>
                    <input
                        #filterInput
                        pInputText
                        type="text"
                        (input)="globalFilter($event)"
                        placeholder="{{ t('modules.providers.provider-preview.users-table.searchPlaceholder') }}" />
                    <button
                        type="button"
                        pButton
                        icon="pi pi-times"
                        (click)="clearGlobalFilter()"
                        [disabled]="!usersTable.hasFilter()"
                        [attr.aria-label]="t('global.txtDelete')"
                        class="p-button-danger p-button-text border-light border-start-0"></button>
                </span>
            </div>
        </ng-template>
        <ng-template pTemplate="header">
            <tr>
                <th pSortableColumn="name" class="text-nowrap">
                    {{ t('modules.providers.provider-preview.users-table.txtName') }}
                    <p-sortIcon field="name"></p-sortIcon>
                </th>
                <th pSortableColumn="email" class="text-nowrap">
                    {{ t('modules.providers.provider-preview.users-table.txtEmail') }}
                    <p-sortIcon field="email"></p-sortIcon>
                </th>
                <th pSortableColumn="phone" class="text-nowrap">
                    {{ t('modules.providers.provider-preview.users-table.txtPhone') }}
                    <p-sortIcon field="phone"></p-sortIcon>
                </th>
                <th pSortableColumn="isAdministrator" class="text-nowrap">
                    {{ t('modules.providers.provider-preview.users-table.txtRole') }}
                    <p-sortIcon field="isAdministrator"></p-sortIcon>
                </th>
            </tr>
        </ng-template>
        <ng-template pTemplate="loadingbody">
            <tr>
                <td>
                    <p-skeleton></p-skeleton>
                </td>
                <td>
                    <p-skeleton></p-skeleton>
                </td>
                <td>
                    <p-skeleton></p-skeleton>
                </td>
                <td>
                    <p-skeleton></p-skeleton>
                </td>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-user>
            <tr [ngClass]="{}">
                <td style="max-width: 18rem" [attr.aria-label]="user.name" [title]="user.name">
                    <span class="multiline-ellipsis">{{ user.name }}</span>
                </td>
                <td style="max-width: 18rem" [attr.aria-label]="user.email" [title]="user.email">
                    <span class="multiline-ellipsis">{{ user.email }}</span>
                </td>
                <td style="max-width: 18rem" [attr.aria-label]="user.phone" [title]="user.phone">
                    <span class="multiline-ellipsis">{{ user.phone }}</span>
                </td>
                <td style="max-width: 18rem">
                    <ng-container *ngIf="user.isAdministrator">
                        <span
                            class="d-flex align-items-center"
                            [title]="t('enums.userRole.administrator')"
                            [attr.aria-label]="t('enums.userRole.administrator')">
                            <i class="material-icons-outlined me-3" [innerHTML]="'&#xe7fd;'"> </i>
                            {{ t('enums.userRole.administrator') }}
                        </span>
                    </ng-container>
                    <ng-container *ngIf="!user.isAdministrator">
                        <span
                            class="d-flex align-items-center"
                            [title]="t('enums.userRole.user')"
                            [attr.aria-label]="t('enums.userRole.user')">
                            <i class="material-icons-outlined me-3" [innerHTML]="'&#xe7fd;'"> </i>
                            {{ t('enums.userRole.user') }}
                        </span>
                    </ng-container>
                </td>
            </tr>
        </ng-template>
        <ng-template pTemplate="emptymessage">
            <tr>
                <td colspan="7">
                    <span
                        class="d-flex align-items-center flex-column empty-message-container bg-background-light-grey">
                        <img src="/assets/images/noresults.png" [alt]="t('aria.txtLogo')" />
                        <span class="text-text-light" [attr.aria-label]="t('global.txtNoRecordsFound')">
                            {{ t('global.txtNoRecordsFound') }}
                        </span>
                    </span>
                </td>
            </tr>
        </ng-template>
    </p-table>
</div>
