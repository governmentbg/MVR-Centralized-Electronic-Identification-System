<section class="h-100" *transloco="let t">
    <p-confirmDialog [style]="{ width: '50vw' }" class="confirmation-header"></p-confirmDialog>
    <app-breadcrumb [items]="breadcrumbItems"></app-breadcrumb>
    <h4 class="mb-4">
        <ng-template [ngIf]="isEditMode">{{ t('modules.tariffs.tariffEdit.title') }}</ng-template>
        <ng-template [ngIf]="!isEditMode">{{ t('modules.tariffs.tariffCreate.title') }}</ng-template>
    </h4>
    <p-card>
        <div class="row">
            <form [formGroup]="form" (ngSubmit)="onSubmit()" class="col col-xl-8">
                <div class="row mb-3">
                    <div class="col-xl-8">
                        <label for="startDate" class="form-label">
                            {{ t('modules.tariffs.startDate') }} <span class="text-danger">*</span>
                        </label>
                        <p-calendar
                            class="w-100"
                            styleClass="w-100"
                            formControlName="startDate"
                            inputId="startDate"
                            name="startDate"
                            [tabindex]="15"
                            [showIcon]="true"
                            dateFormat="yy-mm-dd"
                            [minDate]="minDate"
                            appendTo="body"
                            [baseZIndex]="1045"
                            [placeholder]="t('global.txtDropdownPlaceholder')">
                        </p-calendar>
                        <app-error-field
                            [formControlInstance]="form.controls.startDate"
                            translationPrefix="modules.tariffs.tariffEdit.errors" />
                    </div>
                </div>
                <div class="row mb-3">
                    <div class="col-xl-8">
                        <label for="price" class="form-label">
                            {{ t('modules.tariffs.price') }} <span class="text-danger">*</span>
                        </label>
                        <p-inputNumber
                            formControlName="price"
                            class="w-100"
                            styleClass="w-100"
                            inputId="price"
                            autocomplete="off"
                            mode="decimal"
                            [maxFractionDigits]="2"
                            [min]="0"></p-inputNumber>
                        <app-error-field
                            [formControlInstance]="form.controls.price"
                            translationPrefix="modules.tariffs.tariffEdit.errors" />
                    </div>
                </div>
                <div class="row mb-3">
                    <div class="col-xl-8">
                        <label for="currency" class="form-label">
                            {{ t('modules.tariffs.serviceName') }} <span class="text-danger">*</span>
                        </label>
                        <p-dropdown
                            formControlName="currency"
                            [options]="currencies"
                            styleClass="w-100"
                            inputId="currency"
                            appendTo="body"
                            [placeholder]="t('global.txtDropdownPlaceholder')">
                        </p-dropdown>
                        <app-error-field
                            [formControlInstance]="form.controls.currency"
                            translationPrefix="modules.tariffs.tariffEdit.errors" />
                    </div>
                </div>
                <div class="row mb-3">
                    <div class="col-xl-8">
                        <label for="providedServiceId" class="form-label">
                            {{ t('modules.tariffs.serviceName') }} <span class="text-danger">*</span>
                        </label>
                        <p-dropdown
                            formControlName="providedServiceId"
                            [options]="providedServices"
                            [optionLabel]="providedServicesNameKey"
                            optionValue="id"
                            styleClass="w-100"
                            inputId="providedServiceId"
                            appendTo="body"
                            [placeholder]="t('global.txtDropdownPlaceholder')">
                        </p-dropdown>
                        <app-error-field
                            [formControlInstance]="form.controls.providedServiceId"
                            translationPrefix="modules.tariffs.tariffEdit.errors" />
                        <p-divider class="header-divider" type="solid"></p-divider>
                    </div>
                </div>
                <div class="d-flex gap-4 mt-4">
                    <p-button
                        [label]="t('global.txtCancel')"
                        styleClass="p-button p-button-danger"
                        [loading]="isLoading"
                        [routerLink]="['/tariffs']"></p-button>
                    <p-button
                        [label]="t('global.txtSubmit')"
                        type="submit"
                        [loading]="isLoading"
                        styleClass="p-button p-button-primary"></p-button>
                </div>
            </form>
        </div>
    </p-card>
</section>
