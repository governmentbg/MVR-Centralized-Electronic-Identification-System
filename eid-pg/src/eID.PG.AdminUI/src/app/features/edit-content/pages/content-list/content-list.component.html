<section class="h-100" *transloco="let t">
    <p-confirmDialog [style]="{ width: '50vw' }"></p-confirmDialog>
    <p-card styleClass="h-100">
        <ng-container *ngIf="!pagesList">
            <div class="d-flex flex-wrap gap-4 text-wrap align-items-stretch flex-grow-1 mt-2">
                <div
                    *ngFor="let i of skeletonArray"
                    class="card-container d-flex flex-column justify-content-between border align-items-stretch h-auto">
                    <p-card>
                        <ng-template pTemplate="header">
                            <strong class="card-header w-100 max-h-100 d-block p-3">
                                <p-skeleton width="100%" height="2rem" styleClass=""></p-skeleton>
                            </strong>
                        </ng-template>

                        <ng-template pTemplate="content">
                            <div class="d-flex flex-column justify-content-between align-items-stretch">
                                <p-skeleton width="100%" height="4rem" class="mb-2"></p-skeleton>
                                <p-skeleton width="75%" height="4rem"></p-skeleton>
                            </div>
                        </ng-template>

                        <ng-template pTemplate="footer">
                            <div class="d-flex flex-row gap-2">
                                <p-skeleton width="5rem" height="2.5rem"></p-skeleton>
                                <p-skeleton width="5rem" height="2.5rem"></p-skeleton>
                            </div>
                        </ng-template>
                    </p-card>
                </div>
            </div>
        </ng-container>

        <ng-container *ngIf="pagesList && !editContent">
            <div class="d-flex flex-wrap gap-4 text-wrap align-items-stretch flex-grow-1 mt-2">
                <ng-container *ngFor="let helpPage of pagesList">
                    <p-card
                        class="card-container d-flex flex-column justify-content-between border align-items-stretch h-auto">
                        <ng-template pTemplate="header">
                            <strong
                                class="card-header truncate-header w-100 max-h-100 d-block p-3"
                                style="font-size: 1.5rem">
                                {{ getIndexForLanguage(helpPage)?.title || '' }}
                            </strong>
                        </ng-template>

                        <ng-template pTemplate="content">
                            <div
                                class="card-content d-flex flex-column justify-content-between align-items-stretch"
                                [innerHTML]="getIndexForLanguage(helpPage)?.contentWithHtml || ''"></div>
                        </ng-template>

                        <ng-template pTemplate="footer">
                            <div class="d-flex flex-row gap-2">
                                <p-button
                                    [label]="t('global.txtEdit')"
                                    (click)="showPreview(helpPage)"
                                    icon="pi pi-file-edit"></p-button>
                                <p-button
                                    [label]="t('global.txtDelete')"
                                    icon="pi pi-trash"
                                    styleClass="p-button-danger"
                                    (click)="confirmDelete(helpPage)"></p-button>
                            </div>
                        </ng-template>
                    </p-card>
                </ng-container>
            </div>
        </ng-container>

        <ng-container *ngIf="pagesList && editContent">
            <app-edit-content (hide)="onHideDetails($event)" [contentData]="selectedContent"></app-edit-content>
        </ng-container>
        <ng-container *ngIf="pagesList && pagesList.length === 0">
            <span class="d-flex align-items-center flex-column empty-message-container">
                <img src="/assets/images/noresults.png" [alt]="t('ariaLabels.txtLogo')" />
                <span class="text-text-light" [attr.aria-label]="t('global.txtNoRecordsAdded')">
                    {{ t('global.txtNoRecordsAdded') }}
                </span>
            </span>
        </ng-container>
    </p-card>
</section>
