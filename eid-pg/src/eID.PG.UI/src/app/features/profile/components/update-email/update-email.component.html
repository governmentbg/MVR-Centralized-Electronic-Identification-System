<section class="container h-100" *transloco="let t">
    <p-card styleClass="h-100">
        <div class="row">
            <div class="col">
                <app-breadcrumb [items]="breadcrumbItems"></app-breadcrumb>
                <h2 class="text-primary">{{ t('updateEmail.txtUpdateEmail') }}</h2>
            </div>
        </div>
        <i
            *ngIf="requestInProgress"
            class="pi pi-spin pi-spinner p-dropdown-trigger text-primary mb-2"
            style="font-size: 2rem"></i>
        <p-divider class="header-divider" type="solid"></p-divider>
        <div class="d-flex gap-2" id="content-wrapper">
            <form [formGroup]="form" (ngSubmit)="submit()" style="margin-left: auto" class="p-fluid order-2 order-lg-1">
                <div class="mb-4">
                    <label for="email" class="form-label">
                        {{ t('updateEmail.txtNewEmail') }} <span class="text-danger">*</span>
                    </label>
                    <input pInputText type="email" id="email" value="" formControlName="email" />
                    <div class="text-danger validation-text">
                        <span
                            class="d-block"
                            *ngIf="form.controls['email'].errors?.['required'] &&
                                                    form.controls['email'].dirty
                                                "
                            >{{
                                t('validations.txtPleaseEnterField', {
                                    field: t('registrationPage.titles.email')
                                })
                            }}</span
                        >
                        <span
                            class="d-block"
                            *ngIf="form.controls['email'].errors?.['pattern'] &&
                                                    form.controls['email'].dirty
                                                "
                            >{{ t('global.txtInvalidDataError') }}</span
                        >
                        <span
                            class="d-block"
                            *ngIf="form.controls['email'].errors?.['email'] &&
                                            form.controls['email'].dirty
                                        "
                            >{{ t('global.txtInvalidEmailError') }}</span
                        >
                    </div>
                </div>
                <div class="d-flex gap-3">
                    <button
                        pButton
                        type="button"
                        routerLink="/profile"
                        [attr.aria-label]="t('global.txtCancel')"
                        [label]="t('global.txtCancel')"
                        [disabled]="requestInProgress"
                        class="p-button p-button-danger p-button-sm"></button>
                    <button
                        pButton
                        type="submit"
                        [attr.aria-label]="t('forgottenPassword.txtSubmit')"
                        [label]="t('forgottenPassword.txtSubmit')"
                        [disabled]="requestInProgress"
                        class="p-button p-button-sm"></button>
                </div>
            </form>
            <div class="col-md-2 col-lg-3 offset-lg-2 order-1 order-lg-2" id="help-section">
                <div
                    #helpSection
                    class="h-100 p-3 bg-background-light-grey text-theme-primary-medium rounded-4 help-section"
                    [innerHTML]="t('forgottenPassword.txtHelpSection')"></div>
            </div>
        </div>
    </p-card>
    <p-toast position="bottom-right"></p-toast>
</section>
