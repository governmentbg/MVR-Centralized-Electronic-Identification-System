<section class="container h-100" *transloco="let t">
    <p-card styleClass="h-100">
        <div class="horizontally-centered-container">
            <h2 class="mb-4 text-primary text-center">{{ t('forgottenPassword.txtTitle') }}</h2>
            <i
                *ngIf="requestInProgress"
                class="pi pi-spin pi-spinner p-dropdown-trigger text-primary"
                style="font-size: 2rem"></i>
            <form [formGroup]="form" (ngSubmit)="submit()" class="p-fluid">
                <div>
                    <label for="firstName" class="form-label">
                        {{ t('registrationPage.titles.firstName') }}{{ t('registrationPage.titles.txtById') }} <span class="text-danger">*</span>
                    </label>
                    <input pInputText appTrim type="text" id="firstName" formControlName="firstName" maxlength="40" />
                    <div class="text-danger validation-text">
                        <span
                            class="d-block"
                            *ngIf="form.controls['firstName'].errors?.['required'] && !form.controls['firstName'].errors?.['firstLetterNotCapital'] &&
                                            form.controls['firstName'].dirty
                                        "
                            >{{
                                t('validations.txtPleaseEnterField', {
                                    field: t('registrationPage.titles.firstName')
                                })
                            }}</span
                        >
                        <span
                            class="d-block"
                            *ngIf="form.controls['firstName'].errors?.['pattern'] && !form.controls['firstName'].errors?.['firstLetterNotCapital'] &&
                                            form.controls['firstName'].dirty
                                        "
                            >{{ t('global.txtInvalidDataError') }}</span
                        >
                        <span
                            class="d-block"
                            *ngIf="form.controls['firstName'].errors?.['firstLetterNotCapital'] &&
                form.controls['firstName'].dirty ">
                            {{
                                t('modules.eidManagement.errors.txtFirstNameCapital', {
                                    field: t('modules.eidManagement.form.labels.txtFirstNameLatin')
                                })
                            }}
                        </span>
                    </div>
                </div>
                <div>
                    <label for="secondName" class="form-label">
                        {{ t('registrationPage.titles.secondName') }}{{ t('registrationPage.titles.txtById') }}
                    </label>
                    <input appTrim pInputText type="text" id="secondName" formControlName="secondName" maxlength="40" />
                    <div class="text-danger validation-text">
                        <span
                            class="d-block"
                            *ngIf="form.controls['secondName'].errors?.['pattern'] && !form.controls['secondName'].errors?.['firstLetterNotCapital'] &&
                                            form.controls['secondName'].dirty
                                        "
                            >{{ t('global.txtInvalidDataError') }}</span
                        >
                        <span
                            class="d-block"
                            *ngIf="form.controls['secondName'].errors?.['firstLetterNotCapital'] &&
                form.controls['secondName'].dirty ">
                            {{
                                t('modules.eidManagement.errors.txtSecondNameCapital', {
                                    field: t('registrationPage.titles.secondName')
                                })
                            }}
                        </span>
                    </div>
                </div>
                <div>
                    <label for="lastName" class="form-label">
                        {{ t('registrationPage.titles.lastName') }}{{ t('registrationPage.titles.txtById') }}
                        <span *ngIf="!form.value.secondName" class="text-danger">*</span>
                    </label>
                    <input pInputText appTrim type="text" id="lastName" formControlName="lastName" maxlength="60" />
                    <div class="text-danger validation-text">
                        <span
                            class="d-block"
                            *ngIf="form.controls['lastName'].errors?.['required'] && !form.controls['lastName'].errors?.['firstLetterNotCapital'] &&
                                            form.controls['lastName'].dirty
                                        "
                            >{{
                                t('validations.txtPleaseEnterField', {
                                    field: t('registrationPage.titles.lastName')
                                })
                            }}</span
                        >
                        <span
                            class="d-block"
                            *ngIf="form.controls['lastName'].errors?.['firstLetterNotCapital'] &&
                form.controls['lastName'].dirty ">
                            {{
                                t('modules.eidManagement.errors.txtLastNameCapital', {
                                    field: t('registrationPage.titles.lastName')
                                })
                            }}
                        </span>
                        <span
                            class="d-block"
                            *ngIf="form.controls['lastName'].errors?.['pattern'] && !form.controls['lastName'].errors?.['firstLetterNotCapital'] &&
                                            form.controls['lastName'].dirty
                                        "
                            >{{ t('global.txtInvalidDataError') }}</span
                        >
                    </div>
                </div>
                <div class="mb-4">
                    <label for="email" class="form-label">
                        {{ t('registrationPage.titles.email') }} <span class="text-danger">*</span>
                    </label>
                    <input pInputText type="email" id="email" appTrim formControlName="email" />
                    <div class="text-danger validation-text">
                        <span
                            class="d-block"
                            *ngIf="form.controls['email'].errors?.['required'] &&
                                                    form.controls['email'].dirty
                                                "
                            >{{
                                t('validations.txtPleaseEnterField', {
                                    field: t('registrationPage.titles.email')
                                })
                            }}</span
                        >
                        <span
                            class="d-block"
                            *ngIf="form.controls['email'].errors?.['pattern'] &&
                                                    form.controls['email'].dirty
                                                "
                            >{{ t('global.txtInvalidDataError') }}</span
                        >
                        <span
                            class="d-block"
                            *ngIf="form.controls['email'].errors?.['email'] &&
                                            form.controls['email'].dirty
                                        "
                            >{{ t('global.txtInvalidEmailError') }}</span
                        >
                    </div>
                </div>
                <div class="d-flex gap-3">
                    <button
                        pButton
                        type="button"
                        routerLink="/login"
                        [attr.aria-label]="t('global.txtCancel')"
                        [label]="t('global.txtCancel')"
                        [disabled]="requestInProgress"
                        class="p-button p-button-danger p-button-sm"></button>
                    <button
                        pButton
                        type="submit"
                        [attr.aria-label]="t('forgottenPassword.txtSubmit')"
                        [label]="t('forgottenPassword.txtSubmit')"
                        [disabled]="requestInProgress"
                        class="p-button p-button-sm"></button>
                </div>
            </form>
        </div>
    </p-card>
    <p-toast position="bottom-right"></p-toast>
</section>
