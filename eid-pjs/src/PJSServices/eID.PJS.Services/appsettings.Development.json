{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  },
  "Serilog": {
    "MinimumLevel": {
      "Default": "Debug",
      "Override": {
        "System": "Information",
        "Microsoft": "Information"
      }
    },
    "Properties": {
      "EnvironmentSource": "AUDIT-LOG"
    },
    "Using": [
      "Serilog.Expressions"
    ],
    "Filter": [
      {
        "Name": "ByExcluding",
        "Args": {
          "expression": "RequestPath like '/health%' or EndsWith(RequestPath, '/metrics')"
        }
      }
    ],
    "WriteTo": [
      {
        "Name": "Console",
        "Args": {
          "outputTemplate": "{Timestamp:yyyy-MM-dd HH:mm:ss.ff zzz} [{Level:u4}] {Message}{NewLine}{Exception}"
        }
      },
      {
        "Name": "File",
        "Args": {
          "path": "../logs/pjs-svc/pjs-svc.log",
          "fileSizeLimitBytes": 100000,
          "rollOnFileSizeLimit": true,
          "retainedFileCountLimit": 10,
          "rollingInterval": "Hour",
          "restrictedToMinimumLevel": "Debug",
          "outputTemplate": "{Timestamp:yyyy-MM-dd HH:mm:ss.ff zzz} [{Level:u4}] {Message}{NewLine}{Exception}"
        }
      }
    ]
  },
  "ConnectionStrings": {
    "DefaultConnection": "Host=localhost:5432;Database=pjsservices;Username=postgres;Password=eid$pass"
  },
  "AllowedHosts": "*",
  "AllowedOrigins": "https://localhost:7171;http://localhost:7172",
  "SigningSchedulerSettings": {
    "SchedulePeriod": 0
  },
  "SigningServiceSettings": {
    "StatePath": "..\\logs\\SigningService",
    "KeepStateHistory": true,
    "AuditLogFileExtension": ".audit",
    "HashFileExtension": ".hash",
    "MonitoredFolders": [
      {
        "MonitorFolder": "Z:\\eid-signing\\logs\\audit\\unsigned",
        "TargetFolderLogs": "Z:\\eid-signing\\logs\\audit\\log",
        "TargetFolderHash": "Z:\\eid-signing\\logs\\audit\\hash"
      },
      {
        "MonitorFolder": "..\\logs\\eid-test2\\audit\\unsigned",
        "TargetFolderLogs": "..\\logs\\eid-test2\\audit\\log",
        "TargetFolderHash": "..\\logs\\eid-test2\\audit\\hash"
      }
    ]
  },
  "LogFileMoverSettings": {
    "OrphanFilesMoveIntervalInMinutes": 120
  },
  "ConfigurationCryptoKeyProvider": {
    "EncryptionKey": "0123456789"
  },
  "VerificationSchedulerSettings": {
    "SchedulePeriod": 0
  },
  "VerificationServiceSettings": {
    "StatePath": "..\\logs\\VerificationService",
    "KeepStateHistory": true,
    "AuditLogFileExtension": "*.audit",
    "HashFileExtension": "*.hash",
    "VerifyPeriod": "Year", // Look back period.  Disabled = 0, All = 1, Week = 2, TwoWeeks = 3, Month = 4, Quarter = 5, Year = 6, Day = 7.
    "VerifyPeriodOffset": "00:00:00", // Time offset not to check logs that are not ready yet for verification. If missing default is 1 hour.
    "UseLocalTime": false,
    //"CommandStateProviderType": "eID.PJS.Services.InMemoryCommandStateProvider`1[[eID.PJS.Services.Verification.VerificationServiceSettings, eID.PJS.Services, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]",
    "CommandStateProviderType": "eID.PJS.Services.RedisCommandStateProvider`1[[eID.PJS.Services.Verification.VerificationServiceSettings, eID.PJS.Services, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]",
    "Systems": {
      "eid-test": {
        "AuditLogs": "..\\logs\\eid-test\\audit\\log",
        "Hashes": "..\\logs\\eid-test\\audit\\hash"
      },
      "eid-test2": {
        "AuditLogs": "..\\logs\\eid-test2\\audit\\log",
        "Hashes": "..\\logs\\eid-test2\\audit\\hash"
      }
    }
  },
  "OpenSearchManagerSettings": {
    "Hosts": [ "https://localhost:9200" ],
    "UserName": "admin",
    "Password": "admin",
    "RequestTimeout": null, //In seconds
    "MaxRetryTimeout": null, // In Seconds. The maximum number of retries = MaxRetryTimeout / RequestTimeout
    "PingTimeout": null, // In seconds,
    "EnvironmentName": ""
  },
  "ICryptoKeyProvider": {
    "Type": "eID.PJS.AuditLogging.ConfigurationCryptoKeyProvider, eID.PJS.AuditLogging"
  },
  "RedisCommandStateProviderSettings": {
    "ConnectionString": "localhost:6379",
    "ResultTTL": "01:00:00", // How long to keep the saved results from requests. If omitted the default is one hour. Format: DD.HH:mm:ss -> days.hours:minutes:seconds
    "CommandStatusTTL": "00:20:00" // How long to keep the command execution reference.  Format: DD.HH:mm:ss -> days.hours:minutes:seconds
  },
  "InMemoryCommandStateProviderSettings": {
    "ResultTTL": "00:00:20", // How long to keep the saved results from requests. If omitted the default is one hour. Format: DD.HH:mm:ss -> days.hours:minutes:seconds
    "CommandStatusTTL": "00:20:00" // How long to keep the command execution reference.  Format: DD.HH:mm:ss -> days.hours:minutes:seconds
  },
  "JwtBearerOptions": {
    "Authority": "http://keycloak-dev.mvreid.local/realms/eid_internal",
    "Audience": "eid_pjs",
    "MetadataAddress": "http://keycloak-dev.mvreid.local/realms/eid_internal/.well-known/openid-configuration",
    "RequireHttpsMetadata": false
  },
  "SignServerProviderSettings": {
    "BaseUrl": "https://signserver.mvreid.local",
    "RequestTokenUrl": "/signserver/rest/v1/workers/TimeMonitor/process",
    "CertificatePath": "Cert\\eID-client-DEV.pfx"
  }
}
