{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  },
  "Serilog": {
    "MinimumLevel": {
      "Default": "Debug",
      "Override": {
        "System": "Information",
        "Microsoft": "Information"
      }
    },
    "Properties": {
      "EnvironmentSource": "Dev"
    },
    "Using": [
      "Serilog.Expressions"
    ],
    "Filter": [
      {
        "Name": "ByExcluding",
        "Args": {
          "expression": "RequestPath like '/health%' and @l = 'Information'"
        }
      },
      {
        "Name": "ByExcluding",
        "Args": {
          "expression": "EndsWith(RequestPath, '/metrics')"
        }
      }
    ],
    "WriteTo": [
      {
        "Name": "Console",
        "Args": {
          "outputTemplate": "{Timestamp:yyyy-MM-dd HH:mm:ss.ff zzz} [{Level:u4}] {Message}{NewLine}{Exception}"
        }
      },
      {
        "Name": "File",
        "Args": {
          "path": "logs/%HOSTNAME%_.log",
          "fileSizeLimitBytes": 100000,
          "rollOnFileSizeLimit": true,
          "retainedFileCountLimit": 10,
          "rollingInterval": "Hour",
          "restrictedToMinimumLevel": "Debug",
          "outputTemplate": "{Timestamp:yyyy-MM-dd HH:mm:ss.ff zzz} [{Level:u4}] {Message}{NewLine}{Exception}"
        }
      },
      {
       "Name": "DurableHttpUsingFileSizeRolledBuffers",
       "Args": {
         "requestUri": "http://vector.vector.svc.cluster.local/",
         "textFormatter": "Serilog.Formatting.Elasticsearch.ElasticsearchJsonFormatter,Serilog.Formatting.Elasticsearch",
         "outputTemplate": "{Timestamp:yyyy-MM-dd HH:mm:ss.ff zzz} [{Level:u4}] {Message}{NewLine}{Exception}",
         "bufferBaseFileName": "logs/%HOSTNAME%__BufferedLogs.log",
         "bufferFileSizeLimitBytes": 10485760,
         "retainedBufferFileCountLimit": 10
       }
      }
    ]
  },
  "AllowedHosts": "*",
  "AllowedTestUserId": true,

  "AuditLogSearchSettings": {
    "MaxRecords": 5000,
    "TolerancePercent":  10
  },
  "JwtBearerOptions": {
    "Authority": "https://keycloak-dev.mvreid.local/realms/master",
    "Audience": "eId",
    "MetadataAddress": "https://keycloak-dev.mvreid.local/realms/master/.well-known/openid-configuration",
    "RequireHttpsMetadata": false
  }
}
